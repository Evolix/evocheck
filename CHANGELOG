# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

## [21.09] - 2021-09-17

### Changed

- Changed version numbering to use year.month and be capable to know the age of the script

### Fixed

- Fixed check_tmoutprofile : Add "if" to check if file exists

## [6.9.1] - 2021-07-23

### Changed

- Renamed check_advskew, check_preempt, check_advbase and their alert to add "carp" in them

## [6.9.0] - 2021-07-16

### Added

- Add check_advskew : convention for CARP interfaces. CARP in master state must have advskew parameter between 1 and 50, CARP in backup state must have advskew parameter between 100 and 150, preventing a configuration error with the same value for master and backup

## [6.8.0] - 2020-10-23

### Fixed

- Fix check_noatime : do not take into account commented entry in fstab

## [6.7.7] - 2020-10-22

### Added

- Add check_openvpncronlog : a cron is needed to rotate logs, because a restart of OpenVPN would be needed with the use of newsyslog to rotate logs

### Fixed

- Fix check_uptodate : properly check that syspatch exists
- Fix check_raidok : the same device could be displayed multiple times

## [6.7.6] - 2020-10-15

### Added

- Add check_noatime - Check that all ffs partitions are mounted with the noatime option

### Fixed

- Fix check_softdep - We now check the number of ffs partitions and we compare it to the number of softdep options currently there

## [6.7.5] - 2020-10-09

### Fixed

- Fix check_cronpath - Do not check PATH=XXX but only XXX because XXX can also be in quotes (PATH="XXX" would not be matched)

## [6.7.4] - 2020-08-04

### Added

- Add check_backupuptodate - Check that /home/backup is not older than 2 days

## [6.7.3] - 2020-07-23

### Added

- Add check_ntp - Check the ntpd configuration

### Fixed

- Fix check_defaultroute - We need to check if the /etc/mygate file exists before comparing it

### Removed

- Removed check_postgresql - Deprecated since we now use an API

## [6.7.2] - 2020-07-22

### Added

- Add check_defaultroute function - Make sure the default route in /etc/mygate file is the same that the one currently used

## [6.7.1] - 2020-07-15

### Fixed

- Fix check_customsyslog - We have to check whether EvoBSD is present in newsyslog.conf file
- Fix check_sudomaint function - ADMIN group does not exist anymore, we now check that the wheel group has NOPASSWD to run the evomaintenance command alias
- Fix check_advbase - We want the evocheck advbase function output to be uniq

## [6.6.2] - 2020-04-27

### Added

- Add check_sync function - If a server is a Carp member we check whether the sync.sh script is present or not
- Add check_pfenabled function - We make sure PF is enabled
- Add check_uptodate function - Use syspatch(8) to check if security updates are available

### Changed

- Remove check_oldhomedir - This information is irrelevant since we always keep home directories of former sysadmins
- Now use a version-naming scheme based on OpenBSD's one

## [6.6.1] - 2020-04-21

### Changed

- Rewrite if statements to functions
- Add a main function
- New help message
